{% load static %}
{% include 'header.html' %}
<link rel="stylesheet" href="{% static 'css/view_mech.css' %}">

<body>
    <div class="mechanic-container">
        {% if bookings_pumb %}
            {% for booking in bookings_pumb %}
                <div class="petrol-card">
                    <div class="card-content">
                        {% if booking.user.image %}
                        <img src="{{ booking.user.image.url }}" alt="Profile Image" class="profile-img">
                        {% else %}
                        <img src="{% static 'images/new2.jpeg' %}" alt="Profile Image" class="profile-img">
                        {% endif %}
                        <!-- Mechanic Details -->
                        <h2>{{ booking.user.first_name }} {{ booking.user.last_name }}</h2>
                        <p><strong>name:</strong> {{ booking.name }}</p>
                        <p><strong>Description:</strong> {{ booking.description }}</p>
                        <p><strong>Current Location:</strong><a href="{{ booking.current_loc }}">View Location</a></p>
                        <p><strong>Vehicle Type:</strong> {{ booking.vehicle_type }}</p>
                        <p><strong>Contact:</strong> {{ booking.user.contact }}</p>
                        <p><strong>Fuel Type:</strong> {{ booking.user.fuel_type }}</p>
                        <p><strong>Fuel Quantity:</strong> {{ booking.user.fuel_quantity }}</p>
                        <p><strong>Request Time:</strong> {{ booking.user.request_time }}</p>
                        <p><strong>Urgency:</strong> {{ booking.user.urgency }}</p>
                        <p><strong>Payment Method:</strong> {{ booking.user.payment_method }}</p>
                        {% if booking.status != "Rejected" and  booking.status != "Completed" %}
                <td>
                    {{ booking.status }}
                    <a href="{% url 'update_status' booking.id %}" class="btn btn-success approve-btn" >Update Status</a>
                </td>
                {% elif booking.status == "Completed" %}
                <td>
                    Completed
                </td>
                
                {% elif booking.status == "Rejected" %}
                <td>Rejected</td>
                {% else %}
                <td><a href="{% url 'approve_booking' booking.id %}" class="btn btn-success approve-btn" >Approve</a>
                <a href="{% url 'reject_booking' booking.id %}" class="btn btn-danger reject-btn">Reject</a></td>
                {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="no-users">No Bookings found.</p>
        {% endif %}
    </div>
</body>
</html>
{% include 'footer.html' %}
